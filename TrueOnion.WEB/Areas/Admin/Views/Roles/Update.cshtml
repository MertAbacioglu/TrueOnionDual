@model AppUserVM

<div class="row">
    <div class="col-lg-12">
        <div class="card shadow-lg border-0 rounded-lg mt-5">
            <div class="card-header"><h3 class="text-center font-weight-light my-4"><span class=""></span> Update Users Roles</h3></div>
            <div class="card-body">
                <form asp-action="Update" method="post" asp-controller="Roles">
                    <input type="hidden" asp-for="@Model.Id" value="@Model.Id" />
                    <table  class="table table-bordered" id="apUserAndRolesTable" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th>User Name</th>
                                <th>Existing Roles</th>
                                <th>Add / Remove Role</th>
                            </tr>
                        </thead>
                        <tbody>

                            <tr>
                                <td> @Model.UserName</td>

                                <td>
                                    <ul>
                                        @foreach (AppUserRoleVM item in Model.AppUserRoleVMs)
                                        {
                                            <li>@item.AppRoleVM.Name</li>
                                        }
                                    </ul>
                                </td>
                                <td>
                                    <ul>
                                        @for (int i = 0; i < Model.AppRoleVMs.Count(); i++)
                                        {
                                            <input type="hidden" asp-for="@Model.AppRoleVMs[i].Name" value="@Model.AppRoleVMs[i].Name" />
                                            <li>
                                                @if (@Model.AppRoleVMs[i].isAssigned == true)
                                                {
                                                    <input type="checkbox" asp-for="@Model.AppRoleVMs[i].isAssigned" checked="checked" />
                                                }
                                                else
                                                {
                                                    <input type="checkbox" asp-for="@Model.AppRoleVMs[i].isAssigned" />
                                                }
                                                <label asp-for="@Model.AppRoleVMs[i].isAssigned">@Model.AppRoleVMs[i].Name</label>
                                            </li>

                                        }
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="form-group">

                        <input type="submit" value="Update Users Roles" class="btn-primary" />

                    </div>
                </form>
            </div>
        </div>
    </div>
</div>